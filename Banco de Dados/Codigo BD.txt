/* LÃ³gicoClose: */

CREATE TABLE Usuario (
    IdUsuario int auto_increment PRIMARY KEY,
    Nome char(100),
    Sobrenome char(100),
    Data_de_Nascimento char(100),
    E_mail char(100),
    Senha char(50),
    Genero char(30),
    Biografia char(200),
    Foto_Perfil char(250)
);

CREATE TABLE Roupa (
    IdRoupa int auto_increment PRIMARY KEY,
    Descricao char(200),
    Categoria char(50),
    Estilo char(50),
    Cor char(50),
    Tamanho char(10),
    Marca char(30),
    Tipo char(100),
    Material char(100),
    fk_Usuario_IdUsuario int
);

CREATE TABLE Look (
    IdLook int auto_increment PRIMARY KEY,
    Roupa_de_Cima char(50),
    Roupa_de_Baixo char(50),
    Acessorio char(50)
);

CREATE TABLE Tag (
    IdTag int auto_increment PRIMARY KEY,
    Palavra_Chave char(50)
);

CREATE TABLE Roupa_Look (
    fk_Roupa_IdRoupa int auto_increment,
    fk_Look_IdLook int auto_increment
);

CREATE TABLE Roupa_Tag (
    fk_Roupa_IdRoupa int auto_increment,
    fk_Tag_IdTag int auto_increment
);
 
ALTER TABLE Roupa ADD CONSTRAINT FK_Roupa_2
    FOREIGN KEY (fk_Usuario_IdUsuario)
    REFERENCES Usuario (IdUsuario);
 
ALTER TABLE Roupa_Look ADD CONSTRAINT FK_Roupa_Look_1
    FOREIGN KEY (fk_Roupa_IdRoupa)
    REFERENCES Roupa (IdRoupa)
    ON DELETE RESTRICT;
 
ALTER TABLE Roupa_Look ADD CONSTRAINT FK_Roupa_Look_2
    FOREIGN KEY (fk_Look_IdLook)
    REFERENCES Look (IdLook)
    ON DELETE SET NULL;
 
ALTER TABLE Roupa_Tag ADD CONSTRAINT FK_Roupa_Tag_1
    FOREIGN KEY (fk_Roupa_IdRoupa)
    REFERENCES Roupa (IdRoupa)
    ON DELETE RESTRICT;
 
ALTER TABLE Roupa_Tag ADD CONSTRAINT FK_Roupa_Tag_2
    FOREIGN KEY (fk_Tag_IdTag)
    REFERENCES Tag (IdTag)
    ON DELETE RESTRICT;